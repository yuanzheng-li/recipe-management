<section class="loading" *ngIf="isLoading">
  <mat-progress-spinner
    color="primary"
    mode="indeterminate">
  </mat-progress-spinner>
</section>

<form #form="ngForm" (ngSubmit)="onSubmit(form)" *ngIf="!isLoading">
  <h1>{{ isLoginMode ? 'Login' : 'Sign Up' }}</h1>
  <section class="form-control">
    <mat-form-field appearance="fill">
      <mat-label>Email</mat-label>
      <input
        matInput
        placeholder="email@email.com"
        name="email"
        type="email"
        ngModel
        required
        email
        #email="ngModel"
        >
      <mat-error *ngIf="email.invalid && email.touched">
        <span *ngIf="email.errors?.required">Please enter the email!</span>
        <span *ngIf="email.errors?.email">Please enter a valid email!</span>
      </mat-error>
    </mat-form-field>
  </section>
  <section class="form-control">
    <mat-form-field appearance="fill">
      <mat-label>Password</mat-label>
      <input
        matInput
        placeholder="password"
        name="password"
        type="password"
        required
        minlength="8"
        ngModel
        #password="ngModel"
        >
      <mat-hint>Password must be at least 8 characters!</mat-hint>
      <mat-error *ngIf="password.invalid && password.touched">
        <span *ngIf="password.errors?.required">Please enter the password!</span>
        <span *ngIf="password.errors?.minlength">Please enter a password with at least 8 characters!</span>
      </mat-error>
    </mat-form-field>
  </section>
  <section class="buttons">
    <button
      mat-stroked-button
      color="primary"
      type="submit"
      [disabled]="form.invalid"
      >
      {{ isLoginMode ? 'Login' : 'Sign Up' }}
    </button>
    <button
      mat-stroked-button
      type="button"
      (click)="onSwitchMode()"
      >
      Switch to {{ isLoginMode ? 'Sign Up' : 'Login' }}
    </button>
  </section>
</form>
